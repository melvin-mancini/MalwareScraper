import * as utils from '../utils'
import {config} from '../config'
import rimraf from "rimraf"


const TEST_URL = "https://s3.eu-central-1.amazonaws.com/dasmalwerk/downloads/240387329dee4f03f98a89a2feff9bf30dcba61fcf614cdac24129da54442762/240387329dee4f03f98a89a2feff9bf30dcba61fcf614cdac24129da54442762.zip";
const FILE_NAME = "test";

test('Download a file correctly', async () => {
    config.DEST_FOLDER = __dirname + 'test_folder'
    let result = await utils.downloadFile(TEST_URL, FILE_NAME, 'passwd');
    expect(result).toBeFalsy();
    rimraf.sync(config.DEST_FOLDER);

});

test('Download a file incorrectly', async () => {
    config.DEST_FOLDER = __dirname + 'test_folder'
    let result = await utils.downloadFile(TEST_URL + "error", FILE_NAME, 'passwd');
    expect(result).toBeTruthy();
    rimraf.sync(config.DEST_FOLDER);
});
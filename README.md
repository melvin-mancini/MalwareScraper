# Scraper
**Scraper** is a simple **web data extraction** of the page https://das-malwerk.herokuapp.com/.

The application enables to identify the malwares, extract the information and save data.
The main tools used are **NodeJS** and **Redis**.

## Requirement

The goal is the development of a client that can be used to extract malware data and save the related information from the [**das-malwerk**](https://das-malwerk.herokuapp.com/) website.

## Prerequisites

The main prerequisites to use and run and test the **Scraper** are:

-  **NodeJS >= 14.16.1** installed. For more details, visit the [official NodeJS web site](https://nodejs.org/it/)

-  **NPM >= 6.14.12** installed. For more details visit the [official NPM web site](https://www.npmjs.com/)

-  **Redis >= 6.0.0** installed. For more details visit the [official Redis web site](https://redis.io/)

## Install

To use **Scraper** is necessary clone the repo or download the project.

Once you get the source code, you need to navigate in the folder and execute the following command:

```bash
npm install
```

From the `package.json` file, the `node_modules` folder will be created. The `node_modules` folder contains the necessary dependencies for running the application.

To run correctly **Scraper** a local **Redis Server** must be in execution.
For simplicity, the default connection properties has been used to reach Redis Server ( IP: `127.0.0.1` port:  `6379`)

## Build, Run, Test

After installing the dependencies required and setting the environment, you can run the application by launching the following commands from a terminal:
-  **Dev mode**
	```bash
	npm run dev **args**
	```
-  **Release mode**
	```bash
	npm start **args**
	```
-  **Compile**
	```bash
	npm run build
	```
-  **Test**
	```bash
	npm test
	```
**args** is an optional parameter. **args** must be an **absolute path** where all malware downloads will be saved. If the **absolute path** does not exists it will be created. If **args** is not specified, a **download** folder will be created in the same directory where the  `run` command was executed.

## File structure
The soruce code is in the **src** folder.
Besides the configuration files, the project is structured as following:

-  **`index.ts`** file
	> Main file
-  **`redis.ts`**
	> File that contains all support functions to comunicate with the Redis Server
-  **`malwareModel.ts`**
	> File that contains the model structure of the data saved in Redis
-  **`scraper.ts`**
	> File that contains the main functions to extract the data information
-  **`config.ts`**
	> File that contains the configuration properties of the application

## Architecture

Despite the project is a basic **CLI** implemented through **NodeJS**, the application has been designed by using a **layered architecture**.

The architecture is composed by 3 layers:
-  **View**
	> This layer handles the **user interface** aspects of the application. 
	
-  **Controller**
	> This layer handles the **logic** aspects of the application. 
	
-  **Model**
	> This layer handles the **Model** data which is saved.

The `index.js` is the main file and the core of the application. In the `index.js` file there is the `run` function which handles the execution of the program.

## Main dependencies

The main developer dependencies are the following:
-  [cheerio](https://www.npmjs.com/package/cheerio)
-  [axios](https://www.npmjs.com/package/axios)
-  [nodemod](https://www.npmjs.com/package/nodemod)
-  [redis](https://www.npmjs.com/package/redis)
-  [bluebird](https://www.npmjs.com/package/bluebird)
-  [promisify](https://www.npmjs.com/package/promisify)
-  [jest](https://www.npmjs.com/package/jest)
-  [babel](https://babeljs.io/)
-  [archiver](https://www.npmjs.com/package/archiver)





